"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[1355],{6169:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>n,toc:()=>t});const n=JSON.parse('{"id":"arquitetura-cicd-infraestrutura","title":"Arquitetura, CI/CD e Infraestrutura","description":"Refer\xeancia r\xe1pida para opera\xe7\xf5es comuns.","source":"@site/docs/arquitetura-cicd-infraestrutura.md","sourceDirName":".","slug":"/arquitetura-cicd-infraestrutura","permalink":"/OColecionador/docs/arquitetura-cicd-infraestrutura","draft":false,"unlisted":false,"editUrl":"https://github.com/PatrickCalorioCarvalho/OColecionador/edit/main/Documentation/docs/docs/arquitetura-cicd-infraestrutura.md","tags":[],"version":"current","frontMatter":{"id":"arquitetura-cicd-infraestrutura","title":"Arquitetura, CI/CD e Infraestrutura","sidebar_label":"Introdu\xe7\xe3o"},"sidebar":"docs","previous":{"title":"Avan\xe7ado","permalink":"/OColecionador/docs/ocolecionadormobile-advanced"},"next":{"title":"Avan\xe7ado","permalink":"/OColecionador/docs/arquitetura-cicd-infraestrutura-advanced"}}');var o=s(4848),i=s(8453);const d={id:"arquitetura-cicd-infraestrutura",title:"Arquitetura, CI/CD e Infraestrutura",sidebar_label:"Introdu\xe7\xe3o"},l="\u26a1 Arquitetura, CI/CD e Infraestrutura",a={},t=[{value:"\ud83d\ude80 Iniciar Ambiente",id:"-iniciar-ambiente",level:2},{value:"\ud83d\udd0c URLs de Acesso",id:"-urls-de-acesso",level:2},{value:"\ud83d\udcca Status dos Containers",id:"-status-dos-containers",level:2},{value:"\ud83d\udd04 CI/CD Workflows",id:"-cicd-workflows",level:2},{value:"Build Mobile (APK)",id:"build-mobile-apk",level:3},{value:"Deploy Docker Hub",id:"deploy-docker-hub",level:3},{value:"Self-Hosted Compose",id:"self-hosted-compose",level:3},{value:"\ud83d\udc1b Troubleshooting",id:"-troubleshooting",level:2},{value:"\ud83d\udd10 Credenciais Padr\xe3o",id:"-credenciais-padr\xe3o",level:2},{value:"\ud83d\udcf1 Mobile App",id:"-mobile-app",level:2},{value:"\ud83d\udcbe Backup de Dados",id:"-backup-de-dados",level:2},{value:"\ud83d\udeab Parar Ambiente",id:"-parar-ambiente",level:2}];function c(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.header,{children:(0,o.jsx)(r.h1,{id:"-arquitetura-cicd-e-infraestrutura",children:"\u26a1 Arquitetura, CI/CD e Infraestrutura"})}),"\n",(0,o.jsx)(r.p,{children:"Refer\xeancia r\xe1pida para opera\xe7\xf5es comuns."}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"-iniciar-ambiente",children:"\ud83d\ude80 Iniciar Ambiente"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"# Tudo (autom\xe1tico + manual)\r\ndocker compose up -d\r\n\r\n# Apenas autom\xe1tico (produ\xe7\xe3o)\r\ndocker compose --profile automatic up -d\r\n\r\n# Apenas manual (desenvolvimento)\r\ndocker compose --profile manual up -d\n"})}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"-urls-de-acesso",children:"\ud83d\udd0c URLs de Acesso"}),"\n",(0,o.jsxs)(r.table,{children:[(0,o.jsx)(r.thead,{children:(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.th,{children:"Servi\xe7o"}),(0,o.jsx)(r.th,{children:"URL"}),(0,o.jsx)(r.th,{children:"Status"})]})}),(0,o.jsxs)(r.tbody,{children:[(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.strong,{children:"Frontend"})}),(0,o.jsx)(r.td,{children:(0,o.jsx)(r.a,{href:"https://louse-model-lioness.ngrok-free.app",children:"https://louse-model-lioness.ngrok-free.app"})}),(0,o.jsx)(r.td,{children:"\ud83d\udfe2 Externo"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.strong,{children:"Backend"})}),(0,o.jsx)(r.td,{children:(0,o.jsx)(r.a,{href:"http://localhost:5000",children:"http://localhost:5000"})}),(0,o.jsx)(r.td,{children:"\ud83d\udd35 Local"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.strong,{children:"Classifier"})}),(0,o.jsx)(r.td,{children:(0,o.jsx)(r.a,{href:"http://localhost:5001",children:"http://localhost:5001"})}),(0,o.jsx)(r.td,{children:"\ud83d\udd35 Local"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.strong,{children:"Portainer"})}),(0,o.jsx)(r.td,{children:(0,o.jsx)(r.a,{href:"https://localhost:9443",children:"https://localhost:9443"})}),(0,o.jsx)(r.td,{children:"\ud83d\udfe2 Admin"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.strong,{children:"Metabase"})}),(0,o.jsx)(r.td,{children:(0,o.jsx)(r.a,{href:"http://localhost:3000",children:"http://localhost:3000"})}),(0,o.jsx)(r.td,{children:"\ud83d\udfe2 BI"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.strong,{children:"GlitchTip"})}),(0,o.jsx)(r.td,{children:(0,o.jsx)(r.a,{href:"http://localhost:8000",children:"http://localhost:8000"})}),(0,o.jsx)(r.td,{children:"\ud83d\udd34 Erro"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.strong,{children:"MinIO"})}),(0,o.jsx)(r.td,{children:(0,o.jsx)(r.a,{href:"http://localhost:9001",children:"http://localhost:9001"})}),(0,o.jsx)(r.td,{children:"\ud83d\udfe1 Storage"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.strong,{children:"RabbitMQ"})}),(0,o.jsx)(r.td,{children:(0,o.jsx)(r.a,{href:"http://localhost:15672",children:"http://localhost:15672"})}),(0,o.jsx)(r.td,{children:"\ud83d\udfe1 Queue"})]})]})]}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"-status-dos-containers",children:"\ud83d\udcca Status dos Containers"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"# Listar todos\r\ndocker compose ps\r\n\r\n# Ver logs em tempo real\r\ndocker compose logs -f backend\r\n\r\n# Ver uso de CPU/mem\xf3ria\r\ndocker stats\n"})}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"-cicd-workflows",children:"\ud83d\udd04 CI/CD Workflows"}),"\n",(0,o.jsx)(r.h3,{id:"build-mobile-apk",children:"Build Mobile (APK)"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Trigger:"})," Push em ",(0,o.jsx)(r.code,{children:"OColecionadorMobile/**"})]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"A\xe7\xe3o:"})," Build APK com EAS"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Resultado:"})," Download em artifacts"]}),"\n"]}),"\n",(0,o.jsx)(r.h3,{id:"deploy-docker-hub",children:"Deploy Docker Hub"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Trigger:"})," Push em ",(0,o.jsx)(r.code,{children:"main"})," (m\xfaltiplos paths)"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"A\xe7\xe3o:"})," Build e push de imagens"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Resultado:"})," Dispon\xedvel no Docker Hub"]}),"\n"]}),"\n",(0,o.jsx)(r.h3,{id:"self-hosted-compose",children:"Self-Hosted Compose"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Trigger:"})," Pull Request aberto"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"A\xe7\xe3o:"})," ",(0,o.jsx)(r.code,{children:"docker compose up --build"})]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Resultado:"})," Status check no PR"]}),"\n"]}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"-troubleshooting",children:"\ud83d\udc1b Troubleshooting"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"# Backend com erro?\r\ndocker compose logs backend | tail -50\r\n\r\n# Banco n\xe3o inicia?\r\ndocker compose logs sqlserver\r\n\r\n# RabbitMQ n\xe3o conecta?\r\ndocker compose logs rabbitmq\r\n\r\n# Reiniciar servi\xe7o\r\ndocker compose restart backend\r\n\r\n# Remover volumes (CUIDADO!)\r\ndocker compose down -v\n"})}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"-credenciais-padr\xe3o",children:"\ud83d\udd10 Credenciais Padr\xe3o"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{children:"Usu\xe1rio: OColecionadorUser\r\nSenha: OColecionador@2025\r\nEmail: admin@ocolecionador.local\n"})}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"-mobile-app",children:"\ud83d\udcf1 Mobile App"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"cd OColecionadorMobile\r\nnpm start          # Inicia Expo dev\r\neas build          # Build APK/IPA\r\neas submit         # Submete stores\n"})}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"-backup-de-dados",children:"\ud83d\udcbe Backup de Dados"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"# SQL Server\r\ndocker exec sqlserver /opt/mssql-tools/bin/sqlcmd \\\r\n  -S localhost -U sa -P PASSWORD \\\r\n  -Q \"BACKUP DATABASE OColecionadorDataBase TO DISK='/backup/db.bak'\"\r\n\r\n# PostgreSQL\r\ndocker exec postgres pg_dump -U user dbname > backup.sql\r\n\r\n# MinIO (S3)\r\ndocker exec minio mc mirror minio/bucket ./backup\n"})}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"-parar-ambiente",children:"\ud83d\udeab Parar Ambiente"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"# Parar containers\r\ndocker compose stop\r\n\r\n# Parar e remover\r\ndocker compose down\r\n\r\n# Parar e remover tudo (incl. volumes)\r\ndocker compose down -v\n"})})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);