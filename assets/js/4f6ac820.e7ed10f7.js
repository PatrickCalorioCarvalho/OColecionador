"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[3301],{4408:(a,n,e)=>{e.r(n),e.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>p,frontMatter:()=>t,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"ocolecionadortraining-advanced","title":"OColecionadorTraining - Fluxos Avan\xe7ados","description":"Documenta\xe7\xe3o detalhada dos fluxos complexos de treinamento e otimiza\xe7\xf5es.","source":"@site/docs/ocolecionadortraining-advanced.md","sourceDirName":".","slug":"/ocolecionadortraining-advanced","permalink":"/OColecionador/docs/ocolecionadortraining-advanced","draft":false,"unlisted":false,"editUrl":"https://github.com/PatrickCalorioCarvalho/OColecionador/edit/main/Documentation/docs/docs/ocolecionadortraining-advanced.md","tags":[],"version":"current","frontMatter":{"id":"ocolecionadortraining-advanced","title":"OColecionadorTraining - Fluxos Avan\xe7ados","sidebar_label":"Avan\xe7ado"},"sidebar":"docs","previous":{"title":"Introdu\xe7\xe3o","permalink":"/OColecionador/docs/ocolecionadortraining"},"next":{"title":"Introdu\xe7\xe3o","permalink":"/OColecionador/docs/ocolecionadorfrontend"}}');var i=e(4848),o=e(8453);const t={id:"ocolecionadortraining-advanced",title:"OColecionadorTraining - Fluxos Avan\xe7ados",sidebar_label:"Avan\xe7ado"},l="OColecionadorTraining - Fluxos Avan\xe7ados",s={},d=[{value:"\ud83d\udd04 Fluxo 1: Pipeline Completo de Treinamento com Duas Fases",id:"-fluxo-1-pipeline-completo-de-treinamento-com-duas-fases",level:2},{value:"\ud83d\udcca Fluxo 2: Data Pipeline com Augmenta\xe7\xe3o em Tempo Real",id:"-fluxo-2-data-pipeline-com-augmenta\xe7\xe3o-em-tempo-real",level:2},{value:"\ud83d\udd04 Fluxo 3: Early Stopping e Learning Rate Scheduling",id:"-fluxo-3-early-stopping-e-learning-rate-scheduling",level:2},{value:"\ud83d\udd10 Fluxo 4: Valida\xe7\xe3o de Qualidade do Modelo",id:"-fluxo-4-valida\xe7\xe3o-de-qualidade-do-modelo",level:2},{value:"\ud83d\ude80 Fluxo 5: Escalabilidade com Distributed Training",id:"-fluxo-5-escalabilidade-com-distributed-training",level:2},{value:"\ud83d\udcca Fluxo 6: Benchmark - Timeline de Treinamento",id:"-fluxo-6-benchmark---timeline-de-treinamento",level:2},{value:"\ud83d\udcbe Fluxo 7: Persist\xeancia Completa em PostgreSQL",id:"-fluxo-7-persist\xeancia-completa-em-postgresql",level:2},{value:"\ud83c\udfaf Conclus\xe3o",id:"-conclus\xe3o",level:2}];function c(a){const n={br:"br",h1:"h1",h2:"h2",header:"header",hr:"hr",mermaid:"mermaid",p:"p",strong:"strong",...(0,o.R)(),...a.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"ocolecionadortraining---fluxos-avan\xe7ados",children:"OColecionadorTraining - Fluxos Avan\xe7ados"})}),"\n",(0,i.jsx)(n.p,{children:"Documenta\xe7\xe3o detalhada dos fluxos complexos de treinamento e otimiza\xe7\xf5es."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-fluxo-1-pipeline-completo-de-treinamento-com-duas-fases",children:"\ud83d\udd04 Fluxo 1: Pipeline Completo de Treinamento com Duas Fases"}),"\n",(0,i.jsx)(n.mermaid,{value:"sequenceDiagram\r\n    participant RabbitMQ as \ud83d\udce8 RabbitMQ\r\n    participant Training as \ud83c\udf93 Training Service\r\n    participant DataLoader as \ud83d\udcca Data Loader\r\n    participant ModelBuilder as \ud83e\udde0 Model Builder\r\n    participant Phase1 as \ud83d\udd12 Phase 1: Extract\r\n    participant Phase2 as \ud83d\udd13 Phase 2: Fine-tune\r\n    participant Callbacks as \ud83d\udcc8 Callbacks\r\n    participant MinIO as \ud83d\udce6 MinIO\r\n    participant Database as \ud83d\udcbe PostgreSQL\r\n\r\n    RabbitMQ->>Training: Delivery (batchId, totalImages)\r\n    Training->>Database: INSERT training_jobs (status: training)\r\n    \r\n    Training->>MinIO: Download dataset (9000 imagens)\r\n    MinIO--\x3e>DataLoader: Stream de imagens\r\n    \r\n    DataLoader->>DataLoader: Split train 80% val 20%\r\n    DataLoader->>DataLoader: Cria generators com augmenta\xe7\xe3o\r\n    DataLoader--\x3e>Training: train_gen, val_gen\r\n    \r\n    Training->>ModelBuilder: Constr\xf3i MobileNetV2 base\r\n    ModelBuilder->>ModelBuilder: Load imagenet weights\r\n    ModelBuilder->>ModelBuilder: Congela base\r\n    ModelBuilder->>ModelBuilder: Adiciona top layers\r\n    ModelBuilder--\x3e>Training: Model ready\r\n    \r\n    Training->>Training: Compila com Adam, LR=0.001\r\n    Training->>Phase1: 10 epochs (base congelado)\r\n    \r\n    loop Epoch 1-10\r\n        Phase1->>Phase1: Forward pass\r\n        Phase1->>Phase1: Backward pass\r\n        Phase1->>Phase1: Update top layers\r\n        Phase1->>Callbacks: Log metrics\r\n        Phase1->>Database: INSERT training_metrics\r\n    end\r\n    \r\n    Phase1--\x3e>Phase2: Modelo com top layers treinado\r\n    \r\n    Training->>Phase2: Descongela \xfaltimas 50 layers\r\n    Training->>Training: Recompila com LR=0.00001\r\n    Training->>Phase2: 20 epochs (fine-tuning)\r\n    \r\n    loop Epoch 11-30\r\n        Phase2->>Phase2: Forward pass\r\n        Phase2->>Phase2: Backward pass\r\n        Phase2->>Phase2: Update all layers (low LR)\r\n        Phase2->>Callbacks: Early Stopping check\r\n        Phase2->>Callbacks: Reduce LR on plateau\r\n        Phase2->>Database: INSERT training_metrics\r\n    end\r\n    \r\n    Phase2--\x3e>Training: Modelo treinado\r\n    Training->>Training: Avaliar no test set\r\n    Training->>Training: Calcula accuracy, precision, recall, f1\r\n    \r\n    Training->>Training: Salva model.h5 e weights.h5\r\n    Training->>MinIO: Upload modelo versionado\r\n    MinIO--\x3e>Training: OK\r\n    \r\n    Training->>Database: UPDATE training_jobs (status: success)\r\n    Training->>RabbitMQ: Publish (ModelEvaluation queue)"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-fluxo-2-data-pipeline-com-augmenta\xe7\xe3o-em-tempo-real",children:"\ud83d\udcca Fluxo 2: Data Pipeline com Augmenta\xe7\xe3o em Tempo Real"}),"\n",(0,i.jsx)(n.mermaid,{value:'graph LR\r\n    A["\ud83d\udce6 Dataset MinIO<br/>9000 imagens raw"] --\x3e|Download| B["\ud83d\udcbe Local Storage"]\r\n    \r\n    B --\x3e|Split| B1["Train 80%<br/>7200 imagens"]\r\n    B --\x3e|Split| B2["Val 20%<br/>1800 imagens"]\r\n    \r\n    B1 --\x3e|Batch 1-32| C["\ud83d\udd04 ImageDataGenerator"]\r\n    \r\n    C --\x3e|Pipeline| D["1. Resize 224x224"]\r\n    D --\x3e|Pipeline| E["2. Rotation \xb120\xb0"]\r\n    E --\x3e|Pipeline| F["3. Width shift \xb120%"]\r\n    F --\x3e|Pipeline| G["4. Height shift \xb120%"]\r\n    G --\x3e|Pipeline| H["5. Horizontal flip"]\r\n    H --\x3e|Pipeline| I["6. Zoom \xb120%"]\r\n    I --\x3e|Pipeline| J["7. Normalize 0-1"]\r\n    \r\n    J --\x3e|Generator output| K["\ud83e\udde0 Model Input<br/>Batch 32x224x224x3"]\r\n    \r\n    B2 --\x3e|Validation| L["Val Pipeline<br/>Apenas resize + normalize"]\r\n    \r\n    style A fill:#fff3e0\r\n    style C fill:#e1f5ff\r\n    style K fill:#f3e5f5'}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-fluxo-3-early-stopping-e-learning-rate-scheduling",children:"\ud83d\udd04 Fluxo 3: Early Stopping e Learning Rate Scheduling"}),"\n",(0,i.jsx)(n.mermaid,{value:"sequenceDiagram\r\n    participant Training as \ud83c\udf93 Training\r\n    participant Optimizer as \u2699\ufe0f Optimizer\r\n    participant EarlyStopping as \ud83d\uded1 Early Stopping\r\n    participant ReduceLR as \ud83d\udcc9 Reduce LR\r\n    participant Database as \ud83d\udcbe Database\r\n\r\n    loop Each Epoch\r\n        Training->>Training: train_gen.fit_on_batch()\r\n        Training->>Training: val_gen.evaluate()\r\n        \r\n        Training->>Database: val_loss, val_accuracy\r\n        \r\n        Training->>EarlyStopping: Check patience\r\n        alt val_loss improved\r\n            EarlyStopping->>EarlyStopping: Reset patience counter\r\n            EarlyStopping->>Training: Save best weights\r\n        else val_loss NOT improved\r\n            EarlyStopping->>EarlyStopping: patience++\r\n            alt patience >= 5\r\n                EarlyStopping->>Training: STOP TRAINING\r\n                Training->>Training: Restore best weights\r\n            end\r\n        end\r\n        \r\n        Training->>ReduceLR: Check val_loss trend\r\n        alt val_loss plateaued\r\n            ReduceLR->>Optimizer: LR = LR * 0.1\r\n            ReduceLR->>Database: Log LR reduction\r\n        end\r\n    end"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-fluxo-4-valida\xe7\xe3o-de-qualidade-do-modelo",children:"\ud83d\udd10 Fluxo 4: Valida\xe7\xe3o de Qualidade do Modelo"}),"\n",(0,i.jsx)(n.mermaid,{value:"sequenceDiagram\r\n    participant Training as \ud83c\udf93 Training\r\n    participant Validator as \u2713 Validator\r\n    participant Metrics as \ud83d\udcca Metrics Calculator\r\n    participant Database as \ud83d\udcbe Database\r\n    participant Monitor as \ud83d\udea8 Monitor\r\n\r\n    Training->>Validator: Model training complete\r\n    \r\n    Validator->>Metrics: Calcula accuracy\r\n    Validator->>Metrics: Calcula precision per class\r\n    Validator->>Metrics: Calcula recall per class\r\n    Validator->>Metrics: Calcula F1 score\r\n    \r\n    Metrics--\x3e>Validator: M\xe9tricas calculadas\r\n    \r\n    Validator->>Validator: Check accuracy gt 0.90\r\n    alt Accuracy lt 0.90\r\n        Validator--\x3e>Monitor: Model rejected\r\n        Monitor->>Database: Flag quality issue\r\n    else Accuracy OK\r\n        Validator->>Validator: Check precision gt 0.88\r\n    end\r\n    \r\n    alt Precision lt 0.88\r\n        Validator--\x3e>Monitor: Model rejected\r\n    else Precision OK\r\n        Validator->>Validator: Check recall gt 0.88\r\n    end\r\n    \r\n    alt Recall lt 0.88\r\n        Validator--\x3e>Monitor: Model rejected\r\n    else All metrics OK\r\n        Validator->>Database: Mark model as APPROVED\r\n        Validator->>Database: Ready for production\r\n    end"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-fluxo-5-escalabilidade-com-distributed-training",children:"\ud83d\ude80 Fluxo 5: Escalabilidade com Distributed Training"}),"\n",(0,i.jsx)(n.mermaid,{value:'graph TB\r\n    subgraph DataParallel["Data Parallel Training"]\r\n        A["Batch 1024<br/>imagens"]\r\n        A --\x3e|Split| A1["GPU 0<br/>Batch 256"]\r\n        A --\x3e|Split| A2["GPU 1<br/>Batch 256"]\r\n        A --\x3e|Split| A3["GPU 2<br/>Batch 256"]\r\n        A --\x3e|Split| A4["GPU 3<br/>Batch 256"]\r\n        \r\n        A1 --\x3e|Forward| B1["Loss 0"]\r\n        A2 --\x3e|Forward| B2["Loss 1"]\r\n        A3 --\x3e|Forward| B3["Loss 2"]\r\n        A4 --\x3e|Forward| B4["Loss 3"]\r\n        \r\n        B1 --\x3e|Average| C["Mean Loss"]\r\n        B2 --\x3e|Average| C\r\n        B3 --\x3e|Average| C\r\n        B4 --\x3e|Average| C\r\n        \r\n        C --\x3e|Backward| D1["Gradient 0"]\r\n        C --\x3e|Backward| D2["Gradient 1"]\r\n        C --\x3e|Backward| D3["Gradient 2"]\r\n        C --\x3e|Backward| D4["Gradient 3"]\r\n        \r\n        D1 --\x3e|AllReduce| E["Gradients Averaged"]\r\n        D2 --\x3e|AllReduce| E\r\n        D3 --\x3e|AllReduce| E\r\n        D4 --\x3e|AllReduce| E\r\n        \r\n        E --\x3e|Update| F["Weights sync"]\r\n    end\r\n    \r\n    style A fill:#fff3e0\r\n    style A1 fill:#e1f5ff\r\n    style A2 fill:#e1f5ff\r\n    style A3 fill:#e1f5ff\r\n    style A4 fill:#e1f5ff\r\n    style C fill:#f3e5f5\r\n    style F fill:#e8f5e9'}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-fluxo-6-benchmark---timeline-de-treinamento",children:"\ud83d\udcca Fluxo 6: Benchmark - Timeline de Treinamento"}),"\n",(0,i.jsx)(n.mermaid,{value:'graph LR\r\n    A["Start<br/>t=0s"] --\x3e|Data load<br/>120s| B["Generators ready<br/>t=120s"]\r\n    B --\x3e|Model build<br/>10s| C["Model compiled<br/>t=130s"]\r\n    C --\x3e|Phase 1<br/>Feature Extraction<br/>10 epochs x 180s| D["Phase 1 done<br/>t=1930s"]\r\n    D --\x3e|Phase 2<br/>Fine-tuning<br/>20 epochs x 200s| E["Phase 2 done<br/>t=5930s"]\r\n    E --\x3e|Evaluation<br/>30s| F["Metrics calc<br/>t=5960s"]\r\n    F --\x3e|Save + Upload<br/>60s| G["Complete<br/>t=6020s"]\r\n    \r\n    G --\x3e|Total| H["~100 minutes"]\r\n    \r\n    style A fill:#fff3e0\r\n    style H fill:#e8f5e9'}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-fluxo-7-persist\xeancia-completa-em-postgresql",children:"\ud83d\udcbe Fluxo 7: Persist\xeancia Completa em PostgreSQL"}),"\n",(0,i.jsx)(n.mermaid,{value:"sequenceDiagram\r\n    participant Training as \ud83c\udf93 Training\r\n    participant Jobs as \ud83d\udcbe training_jobs\r\n    participant Metrics as \ud83d\udcbe training_metrics\r\n    participant Hyperparams as \ud83d\udcbe hyperparameters\r\n    participant Models as \ud83d\udcbe model_versions\r\n\r\n    Training->>Jobs: INSERT (status: training)\r\n    Jobs--\x3e>Training: job_id = 1\r\n    \r\n    loop Each Epoch\r\n        Training->>Metrics: INSERT epoch metrics\r\n        Metrics->>Metrics: loss, accuracy, val_loss, val_accuracy\r\n        Training->>Training: Check early stopping\r\n    end\r\n    \r\n    Training->>Hyperparams: INSERT final params\r\n    Hyperparams->>Hyperparams: batch_size, lr, optimizer, etc\r\n    \r\n    Training->>Training: Training complete\r\n    Training->>Jobs: UPDATE status = success\r\n    Training->>Jobs: UPDATE accuracy = 0.9412\r\n    Training->>Jobs: UPDATE training_time = 3600\r\n    \r\n    Training->>Models: INSERT new model version\r\n    Models->>Models: model_version, accuracy, precision, recall\r\n    Models->>Models: model_path, trained_at"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-conclus\xe3o",children:"\ud83c\udfaf Conclus\xe3o"}),"\n",(0,i.jsxs)(n.p,{children:["O ",(0,i.jsx)(n.strong,{children:"OColecionadorTraining"})," oferece:"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"Two-Phase Training"})," \u2013 Feature extraction + Fine-tuning",(0,i.jsx)(n.br,{}),"\n","\u2705 ",(0,i.jsx)(n.strong,{children:"Data Augmentation"})," \u2013 Em tempo real durante treino",(0,i.jsx)(n.br,{}),"\n","\u2705 ",(0,i.jsx)(n.strong,{children:"Early Stopping"})," \u2013 Para evitar overfitting",(0,i.jsx)(n.br,{}),"\n","\u2705 ",(0,i.jsx)(n.strong,{children:"Learning Rate Scheduling"})," \u2013 Otimiza\xe7\xe3o adaptativa",(0,i.jsx)(n.br,{}),"\n","\u2705 ",(0,i.jsx)(n.strong,{children:"Checkpoint Management"})," \u2013 Salva best model",(0,i.jsx)(n.br,{}),"\n","\u2705 ",(0,i.jsx)(n.strong,{children:"Hyperparameter Tuning"})," \u2013 Grid search suportado",(0,i.jsx)(n.br,{}),"\n","\u2705 ",(0,i.jsx)(n.strong,{children:"Cross-Validation"})," \u2013 K-folds para robustez",(0,i.jsx)(n.br,{}),"\n","\u2705 ",(0,i.jsx)(n.strong,{children:"Distributed Training"})," \u2013 Multi-GPU support",(0,i.jsx)(n.br,{}),"\n","\u2705 ",(0,i.jsx)(n.strong,{children:"Full Observability"})," \u2013 M\xe9tricas em tempo real",(0,i.jsx)(n.br,{}),"\n","\u2705 ",(0,i.jsx)(n.strong,{children:"Production Ready"})," \u2013 Versionamento e tracking"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Tempo m\xe9dio: 60-120 minutos por modelo"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Acur\xe1cia final: 92-96%"})]})]})}function p(a={}){const{wrapper:n}={...(0,o.R)(),...a.components};return n?(0,i.jsx)(n,{...a,children:(0,i.jsx)(c,{...a})}):c(a)}}}]);